<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>R Client for FlowFabric API • flowfabricr</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/Fira_Sans-0.4.9/font.css" rel="stylesheet">
<link href="deps/Fira_Mono-0.4.9/font.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="R Client for FlowFabric API">
<meta name="description" content="High-performance R client for the FlowFabric REST API, including JWT authentication (leveraging and improving hfutils). Designed for expert R users.">
<meta property="og:description" content="High-performance R client for the FlowFabric REST API, including JWT authentication (leveraging and improving hfutils). Designed for expert R users.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">flowfabricr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="articles/index.html">Articles</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="flowfabricr-effortless-r-access-to-flowfabric-api">flowfabricr: Effortless R Access to FlowFabric API<a class="anchor" aria-label="anchor" href="#flowfabricr-effortless-r-access-to-flowfabric-api"></a>
</h1></div>
<p><code>flowfabricr</code> is a powerful R client for the FlowFabric API, providing seamless access to hydrologic forecasts, reanalysis, rating curves, and datasets. With robust authentication and automatic token caching, you can focus on data science, not on data munging plumbing.</p>
<div class="section level2">
<h2 id="key-features">Key Features<a class="anchor" aria-label="anchor" href="#key-features"></a>
</h2>
<ul>
<li>
<strong>Evolving catalog</strong> of harmonized data from multiple models</li>
<li>
<strong>Single method access</strong> to all models - both retrospective and forecast</li>
<li>
<strong>One-time authentication</strong>: Log in once, and your token is cached for future use.</li>
<li>
<strong>Arrow IPC support</strong>: Fast, memory-efficient data transfer</li>
</ul>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#  Install from GitHub:</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">'lynker-spatial/flowfabric-r'</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="quick-start">Quick Start<a class="anchor" aria-label="anchor" href="#quick-start"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">library</span>(flowfabricr)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="co"># 1. List available datasets</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>datasets <span class="ot">&lt;-</span> <span class="fu">flowfabric_list_datasets</span>()</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="fu">head</span>(datasets)</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="co"># 2. Query streamflow forecast (first call prompts login, then caches token)</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="co"># More on atuhentication below ...</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>tbl <span class="ot">&lt;-</span> <span class="fu">flowfabric_streamflow_query</span>(</span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a>    <span class="at">dataset_id =</span> <span class="st">"nws_owp_nwm_analysis"</span>,</span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a>    <span class="at">feature_ids =</span> <span class="fu">c</span>(<span class="st">"101"</span>, <span class="st">"1001"</span>),</span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a>    <span class="at">issue_time =</span> <span class="st">"latest"</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a>)</span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(tbl)</span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a><span class="fu">head</span>(df)</span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a><span class="co"># 3. Query streamflow reanalysis data</span></span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a>tbl_re <span class="ot">&lt;-</span> <span class="fu">flowfabric_streamflow_query</span>(</span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a>  <span class="st">"nws_owp_nwm_reanalysis_3_0"</span>,</span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a>  <span class="at">feature_ids =</span> <span class="fu">c</span>(<span class="st">"101"</span>, <span class="st">"1001"</span>),</span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a>  <span class="at">start_time =</span> <span class="st">"2018-01-01"</span>,</span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a>  <span class="at">end_time =</span> <span class="st">"2018-01-31"</span></span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a>)</span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a></span>
<span id="cb2-25"><a href="#cb2-25" tabindex="-1"></a><span class="co"># 4. Query ratings</span></span>
<span id="cb2-26"><a href="#cb2-26" tabindex="-1"></a><span class="st">```</span><span class="at">r</span></span>
<span id="cb2-27"><a href="#cb2-27" tabindex="-1"></a><span class="at">ratings &lt;- flowfabric_ratings_query(</span></span>
<span id="cb2-28"><a href="#cb2-28" tabindex="-1"></a><span class="at">    feature_ids = c("101", "1001"), </span></span>
<span id="cb2-29"><a href="#cb2-29" tabindex="-1"></a><span class="at">    type = "rem"</span></span>
<span id="cb2-30"><a href="#cb2-30" tabindex="-1"></a><span class="at">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="authentication--token-caching">Authentication &amp; Token Caching<a class="anchor" aria-label="anchor" href="#authentication--token-caching"></a>
</h2>
<p>Using this platform requires authentication via the Lynker Spatial Portal. Accounts are free to set up and use. If use exceeds costs we can burden we will reach out to power users to better understand how we can help.</p>
<p>To get access, users can create an account here: <a href="https://proxy.lynker-spatial.com/" class="external-link uri">https://proxy.lynker-spatial.com/</a></p>
<p>The first API call will prompt you to log in via browser. Your token is then cached and reused for all future calls—no repeated browser prompts!</p>
<p><strong>Manual token refresh:</strong></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">flowfabric_refresh_token</span><span class="op">(</span><span class="op">)</span> <span class="co"># Forces re-authentication and updates cached token</span></span></code></pre></div>
<p><strong>Advanced:</strong> You can always pass a token explicitly:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">token</span> <span class="op">&lt;-</span> <span class="fu">hfutils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/hfutils/man/lynker_spatial_auth.html" class="external-link">lynker_spatial_auth</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">id_token</span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/flowfabric_streamflow_query.html">flowfabric_streamflow_query</a></span><span class="op">(</span><span class="st">"nws_owp_nwm_analysis"</span>, feature_ids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"101"</span><span class="op">)</span>, token <span class="op">=</span> <span class="va">token</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="troubleshooting">Troubleshooting<a class="anchor" aria-label="anchor" href="#troubleshooting"></a>
</h2>
<ul>
<li>If you see repeated browser prompts, call <code>flowfabric_refresh_token()</code> once, then retry your queries.</li>
<li>If you switch users, manually refresh the token.</li>
<li>Use <code>verbose = TRUE</code> in any endpoint for detailed debug output.</li>
</ul>
</div>
<div class="section level2">
<h2 id="learn-more">Learn More<a class="anchor" aria-label="anchor" href="#learn-more"></a>
</h2>
<ul>
<li>See the vignettes for advanced usage, authentication, and custom queries.</li>
<li>All API responses are Arrow tables for high-performance analytics.</li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing flowfabricr</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Mike Johnson <br><small class="roles"> Author, maintainer </small>   </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mike Johnson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
